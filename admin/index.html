<!DOCTYPE html>
<html lang="ne">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>नगरकोट नेटवर्क - स्थानीय • राष्ट्रिय समाचार</title>
    <link rel="icon" href="title-logo.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mukta:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Mukta', sans-serif;
        }

        @keyframes marquee {
            0% {
                transform: translateX(0%);
            }

            100% {
                transform: translateX(-100%);
            }
        }

        .animate-marquee {
            display: inline-block;
            animation: marquee 40s linear infinite;
        }

        /* Fixed line-clamp with vendor prefixes */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-clamp: 2;
        }

        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-clamp: 3;
        }

        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s ease-in-out infinite;
        }

        @keyframes loading {
            0% {
                background-position: 200% 0;
            }

            100% {
                background-position: -200% 0;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* News card hover effects */
        .news-card {
            transition: all 0.3s ease;
        }

        .news-card:hover {
            transform: translateY(-4px);
        }

        /* Image overlay gradient */
        .img-overlay {
            background: linear-gradient(to top, rgba(0, 0, 0, 0.7) 0%, transparent 50%);
        }

        /* Smooth scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>

<body class="min-h-screen bg-gray-50">

    <!-- Supabase Configuration -->
    <script>
        const SUPABASE_URL = "https://waqfebkbgyfhybompnsm.supabase.co";
        const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndhcWZlYmtiZ3lmaHlib21wbnNtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU5MDE5MzQsImV4cCI6MjA4MTQ3NzkzNH0.0WttHhOGKaP60ixIkT1MnqV4jbxgteN68ez-nCYU16c";

        const { createClient } = supabase;
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    </script>

    <!-- Top Header Bar -->
    <div class="bg-gradient-to-r from-blue-900 to-blue-700 text-white text-sm py-2">
        <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    <span id="currentDate">मंगलबार, डिसेम्बर १६, २०२५</span>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <button class="hover:text-blue-200 transition">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                </button>
                <span class="hidden sm:inline">Phone: 9861466642</span>
            </div>
        </div>
    </div>

    <!-- Breaking News Ticker -->
    <div class="bg-red-600 text-white py-2 overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 flex items-center gap-4">
            <span
                class="font-bold bg-white text-red-600 px-3 py-1 rounded text-sm whitespace-nowrap flex items-center gap-1">
                <svg class="w-3 h-3 animate-pulse" fill="currentColor" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"></circle>
                </svg>
                BREAKING
            </span>
            <div class="overflow-hidden flex-1">
                <div id="breakingNews" class="animate-marquee whitespace-nowrap">
                    <span class="inline-block mx-8">• Loading breaking news...</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between py-4">
                <!-- Logo -->
                <div class="flex items-center gap-3">
                    <div class="w-20 h-20 rounded-lg flex items-center justify-center">
                        <img src="networknagarkot-logo-removebg.png" alt="nagarkotnetwork-logo"
                            class="w-full h-full object-contain" onerror="this.style.display='none'">
                    </div>
                    <div>
                        <h1
                            class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent">
                            नगरकोट नेटवर्क</h1>
                        <p class="text-xs text-gray-500">स्थानीय • राष्ट्रिय समाचार</p>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <nav class="hidden lg:flex items-center gap-6">
                    <a href="#" onclick="filterByCategory('all')"
                        class="nav-link text-gray-700 hover:text-blue-600 font-medium transition flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-blue-50">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                            </path>
                        </svg>
                        सबै
                    </a>
                    <a href="#" onclick="filterByCategory('समाचार')"
                        class="nav-link text-gray-700 hover:text-blue-600 font-medium transition flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-blue-50">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9">
                            </path>
                        </svg>
                        समाचार
                    </a>
                    <a href="#" onclick="filterByCategory('राजनीति')"
                        class="nav-link text-gray-700 hover:text-blue-600 font-medium transition flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-blue-50">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z">
                            </path>
                        </svg>
                        राजनीति
                    </a>
                    <a href="#" onclick="filterByCategory('शिक्षा')"
                        class="nav-link text-gray-700 hover:text-blue-600 font-medium transition flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-blue-50">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M12 14l9-5-9-5-9 5 9 5z"></path>
                            <path
                                d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z">
                            </path>
                        </svg>
                        शिक्षा
                    </a>
                    <a href="#" onclick="filterByCategory('प्रविधि')"
                        class="nav-link text-gray-700 hover:text-blue-600 font-medium transition flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-blue-50">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="2" y1="12" x2="22" y2="12"></line>
                            <path
                                d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z">
                            </path>
                        </svg>
                        प्रविधि
                    </a>
                    <a href="#" onclick="filterByCategory('खेलकुद')"
                        class="nav-link text-gray-700 hover:text-blue-600 font-medium transition flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-blue-50">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        </svg>
                        खेलकुद
                    </a>
                </nav>

                <!-- Action Buttons -->
                <div class="flex items-center gap-3">
                    <button onclick="toggleSearch()" class="p-2 hover:bg-gray-100 rounded-full transition">
                        <svg class="w-5 h-5 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                    <button onclick="toggleMenu()" class="lg:hidden p-2 hover:bg-gray-100 rounded-full transition">
                        <svg id="menuIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Search Bar -->
            <div id="searchBar" class="hidden pb-4">
                <div class="relative">
                    <input type="text" id="searchInput" placeholder="समाचार खोज्नुहोस्..." onkeyup="handleSearch()"
                        class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
                    <svg class="absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" fill="none"
                        stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden lg:hidden border-t border-gray-200 bg-white">
            <nav class="py-4 px-4 space-y-2">
                <a href="#" onclick="filterByCategory('all'); toggleMenu();"
                    class="flex items-center gap-3 px-4 py-3 hover:bg-gray-50 rounded-lg transition">
                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                        </path>
                    </svg>
                    <span class="font-medium">सबै</span>
                </a>
                <a href="#" onclick="filterByCategory('समाचार'); toggleMenu();"
                    class="flex items-center gap-3 px-4 py-3 hover:bg-gray-50 rounded-lg transition">
                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9">
                        </path>
                    </svg>
                    <span class="font-medium">समाचार</span>
                </a>
                <a href="#" onclick="filterByCategory('राजनीति'); toggleMenu();"
                    class="flex items-center gap-3 px-4 py-3 hover:bg-gray-50 rounded-lg transition">
                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857"></path>
                    </svg>
                    <span class="font-medium">राजनीति</span>
                </a>
                <a href="#" onclick="filterByCategory('शिक्षा'); toggleMenu();"
                    class="flex items-center gap-3 px-4 py-3 hover:bg-gray-50 rounded-lg transition">
                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M12 14l9-5-9-5-9 5 9 5z"></path>
                    </svg>
                    <span class="font-medium">शिक्षा</span>
                </a>
                <a href="#" onclick="filterByCategory('प्रविधि'); toggleMenu();"
                    class="flex items-center gap-3 px-4 py-3 hover:bg-gray-50 rounded-lg transition">
                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"></circle>
                    </svg>
                    <span class="font-medium">प्रविधि</span>
                </a>
                <a href="#" onclick="filterByCategory('खेलकुद'); toggleMenu();"
                    class="flex items-center gap-3 px-4 py-3 hover:bg-gray-50 rounded-lg transition">
                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                    </svg>
                    <span class="font-medium">खेलकुद</span>
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column - Main Content -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Featured Stories -->
                <section>
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold text-gray-900 flex items-center gap-2">
                            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z">
                                </path>
                            </svg>
                            विशेष समाचार
                        </h2>
                    </div>

                    <div id="featuredNews" class="grid gap-6">
                        <!-- Loading skeletons -->
                        <div class="bg-white rounded-xl shadow-md overflow-hidden">
                            <div class="md:flex">
                                <div class="md:w-2/5 skeleton h-64"></div>
                                <div class="md:w-3/5 p-6 space-y-3">
                                    <div class="skeleton h-4 w-20 rounded"></div>
                                    <div class="skeleton h-6 w-full rounded"></div>
                                    <div class="skeleton h-4 w-3/4 rounded"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Latest News Grid -->
                <section>
                    <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        ताजा समाचार
                    </h2>
                    <div id="latestNews" class="grid md:grid-cols-2 gap-6">
                        <!-- Loading skeletons -->
                        <div class="bg-white rounded-xl p-6 shadow-md space-y-3">
                            <div class="skeleton h-4 w-20 rounded"></div>
                            <div class="skeleton h-6 w-full rounded"></div>
                            <div class="skeleton h-4 w-3/4 rounded"></div>
                        </div>
                        <div class="bg-white rounded-xl p-6 shadow-md space-y-3">
                            <div class="skeleton h-4 w-20 rounded"></div>
                            <div class="skeleton h-6 w-full rounded"></div>
                            <div class="skeleton h-4 w-3/4 rounded"></div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Right Sidebar -->
            <div class="space-y-6">
                <!-- Trending Topics -->
                <aside class="bg-white rounded-xl p-6 shadow-md">
                    <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                        <svg class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        </svg>
                        ट्रेन्डिङ विषय
                    </h3>
                    <div id="trendingTopics" class="space-y-2">
                        <!-- Will be populated dynamically -->
                        <div class="skeleton h-12 rounded-lg"></div>
                        <div class="skeleton h-12 rounded-lg"></div>
                        <div class="skeleton h-12 rounded-lg"></div>
                    </div>
                </aside>

                <!-- Newsletter Signup -->
                <aside class="bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl p-6 shadow-lg text-white">
                    <h3 class="text-xl font-bold mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path
                                d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                            </path>
                        </svg>
                        न्युजलेटर सदस्यता
                    </h3>
                    <p class="text-blue-100 text-sm mb-4">
                        हप्तामा दुई चोटि हाइलाइट समाचारहरू प्राप्त गर्नुहोस्
                    </p>
                    <form id="newsletterForm" onsubmit="subscribeNewsletter(event)">
                        <input type="email" id="newsletterEmail" placeholder="तपाईंको इमेल..."
                            class="w-full px-4 py-3 rounded-lg mb-3 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-300"
                            required>
                        <button type="submit"
                            class="w-full bg-white text-blue-600 font-semibold py-3 rounded-lg hover:bg-blue-50 transition flex items-center justify-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path d="M5 13l4 4L19 7"></path>
                            </svg>
                            सबमिट गर्नुहोस्
                        </button>
                    </form>
                    <p id="newsletterMsg" class="text-sm mt-2 hidden"></p>
                </aside>

                <!-- Social Media -->
                <aside class="bg-white rounded-xl p-6 shadow-md">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">हामीलाई फलो गर्नुहोस्</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <a href="https://www.facebook.com/profile.php?id=100093968808553"
                            class="py-3 bg-blue-50 hover:bg-blue-100 rounded-lg font-medium text-blue-600 transition text-center flex items-center justify-center gap-2">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z">
                                </path>
                            </svg>
                            Facebook
                        </a>
                        <a href="https://wa.me/9779861466642"
                            class="py-3 bg-green-50 hover:bg-green-100 rounded-lg font-medium text-green-600 transition text-center flex items-center justify-center gap-2">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M20.52 3.48A11.82 11.82 0 003.7 19.3L2 22l2.82-.74A11.8 11.8 0 1020.52 3.48zm-8.7 18.18a9.86 9.86 0 01-5.03-1.38l-.36-.22-3.33.87.89-3.24-.24-.37a9.84 9.84 0 1118.1-5.18 9.86 9.86 0 01-9.83 9.52zm5.39-7.36c-.3-.15-1.78-.88-2.05-.98s-.48-.15-.68.15-.78.98-.95 1.18-.35.23-.65.08a8.1 8.1 0 01-2.39-1.47 8.95 8.95 0 01-1.65-2.05c-.17-.3 0-.46.13-.61.14-.14.3-.35.45-.52.15-.18.2-.3.3-.5s.05-.38-.02-.53c-.08-.15-.68-1.65-.93-2.27-.24-.58-.48-.5-.68-.51h-.58c-.2 0-.53.08-.8.38s-1.05 1.03-1.05 2.5 1.08 2.9 1.23 3.1c.15.2 2.13 3.25 5.16 4.56.72.31 1.28.5 1.72.64.72.23 1.38.2 1.9.12.58-.09 1.78-.73 2.03-1.43.25-.7.25-1.3.18-1.43-.08-.13-.28-.2-.58-.35z" />
                            </svg>
                            Whatsapp
                        </a>
                        <a href="#"
                            class="py-3 bg-pink-50 hover:bg-pink-100 rounded-lg font-medium text-pink-600 transition text-center flex items-center justify-center gap-2">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z">
                                </path>
                            </svg>
                            Instagram
                        </a>
                        <a href="#"
                            class="py-3 bg-red-50 hover:bg-red-100 rounded-lg font-medium text-red-600 transition text-center flex items-center justify-center gap-2">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z">
                                </path>
                            </svg>
                            YouTube
                        </a>
                    </div>
                </aside>

                <!-- Category Stats -->
                <aside id="categoryStats" class="bg-white rounded-xl p-6 shadow-md">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">वर्ग अनुसार</h3>
                    <div class="space-y-3">
                        <!-- Will be populated dynamically -->
                        <div class="skeleton h-10 rounded-lg"></div>
                        <div class="skeleton h-10 rounded-lg"></div>
                        <div class="skeleton h-10 rounded-lg"></div>
                    </div>
                </aside>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 mt-16">
        <div class="max-w-7xl mx-auto px-4 py-12">
            <div class="grid md:grid-cols-4 gap-8 mb-8">
                <!-- About -->
                <div>
                    <h4 class="text-white font-bold text-lg mb-4">नगरकोट नेटवर्क</h4>
                    <p class="text-sm text-gray-400 mb-4">
                        स्थानीय र राष्ट्रिय समाचारको विश्वसनीय स्रोत
                    </p>
                    <div class="space-y-2 text-sm">
                        <p>प्रधान सम्पादक: सुमन दुलाल</p>
                        <p>अध्यक्ष: प्रदिप न्यौपाने</p>
                    </div>
                </div>

                <!-- Quick Links -->
                <div>
                    <h4 class="text-white font-bold text-lg mb-4">द्रुत लिङ्क</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" onclick="filterByCategory('all')" class="hover:text-white transition">समाचार</a>
                        </li>
                        <li><a href="#" onclick="filterByCategory('राजनीति')"
                                class="hover:text-white transition">राजनीति</a></li>
                        <li><a href="#" onclick="filterByCategory('शिक्षा')"
                                class="hover:text-white transition">शिक्षा</a></li>
                        <li><a href="#" onclick="filterByCategory('प्रविधि')"
                                class="hover:text-white transition">प्रविधि</a></li>
                        <li><a href="#" onclick="filterByCategory('खेलकुद')"
                                class="hover:text-white transition">खेलकुद</a></li>
                    </ul>
                </div>

                <!-- Contact -->
                <div>
                    <h4 class="text-white font-bold text-lg mb-4">सम्पर्क</h4>
                    <ul class="space-y-2 text-sm">
                        <li class="flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z">
                                </path>
                            </svg>
                            9861466642
                        </li>
                        <li class="flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                                </path>
                            </svg>
                            nagarkotnetwork@gmail.com
                        </li>
                        <li class="pt-2 border-t border-gray-700 mt-4">
                            सूचना विभाग दर्ता: ४०४३-२०७९/८०
                        </li>
                        <li>प्रेस काउन्सिल दर्ता: ४१६३-२०८०/८१</li>
                    </ul>
                </div>

                <!-- Categories -->
                <div>
                    <h4 class="text-white font-bold text-lg mb-4">वर्ग</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" onclick="filterByCategory('मनोरञ्जन')"
                                class="hover:text-white transition">मनोरञ्जन</a></li>
                        <li><a href="#" onclick="filterByCategory('अर्थ')"
                                class="hover:text-white transition">अर्थ/वाणिज्य</a></li>
                        <li><a href="#" onclick="filterByCategory('स्वास्थ्य')"
                                class="hover:text-white transition">स्वास्थ्य</a></li>
                        <li><a href="login.html" class="hover:text-blue-400 transition flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1">
                                    </path>
                                </svg>
                                Admin Login
                            </a></li>
                    </ul>
                </div>
            </div>

            <!-- Bottom Bar -->
            <div
                class="border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4 text-sm">
                <p>© २०२६ Nagarkot Network — सबै अधिकार सुरक्षित</p>
                <p class="text-gray-500">Developed By <a href="https://rachitpokhrel.com.np" target="_blank"
                        class="hover:text-blue-400 transition">Rachit Pokhrel</a></p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        let allNews = [];
        let currentFilter = 'all';

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function () {
            loadAllNews();
            loadBreakingNews();
            updateCurrentDate();
        });

        // Load all news from Supabase
        async function loadAllNews() {
            try {
                const { data, error } = await supabaseClient
                    .from('news')
                    .select('*')
                    .order('created_at', { ascending: false });

                if (error) throw error;

                allNews = data || [];
                displayNews();
                updateTrendingTopics();
                updateCategoryStats();
            } catch (error) {
                console.error('Error loading news:', error);
                document.getElementById('featuredNews').innerHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-lg p-6 text-center">
                        <svg class="w-12 h-12 text-red-500 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <p class="text-red-600">समाचार लोड गर्न असफल। कृपया पृष्ठ पुन: लोड गर्नुहोस्।</p>
                    </div>
                `;
            }
        }

        // Load breaking news
        async function loadBreakingNews() {
            try {
                const { data, error } = await supabaseClient
                    .from('news')
                    .select('*')
                    .eq('is_breaking', true)
                    .order('created_at', { ascending: false })
                    .limit(5);

                if (error) throw error;

                if (data && data.length > 0) {
                    const breakingHTML = data.map(news =>
                        `<span class="inline-block mx-8">• ${news.title}</span>`
                    ).join('');

                    document.getElementById('breakingNews').innerHTML = breakingHTML + breakingHTML; // Duplicate for seamless loop
                } else {
                    document.getElementById('breakingNews').innerHTML = '<span class="inline-block mx-8">• कुनै ब्रेकिङ समाचार छैन</span>';
                }
            } catch (error) {
                console.error('Error loading breaking news:', error);
            }
        }

        // Display news based on current filter
        function displayNews() {
            const filteredNews = currentFilter === 'all'
                ? allNews
                : allNews.filter(news => news.category === currentFilter);

            // Featured news (top 3 featured or latest)
            const featured = allNews.filter(news => news.is_featured).slice(0, 3);
            const featuredNews = featured.length > 0 ? featured : filteredNews.slice(0, 3);

            document.getElementById('featuredNews').innerHTML = featuredNews.map(news => `
                <article class="news-card bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition group fade-in cursor-pointer" onclick="viewFullNews(${news.id})">
                    <div class="md:flex">
                        <div class="md:w-2/5 relative overflow-hidden bg-gray-200">
                            ${news.image_url ? `
                                <img src="${news.image_url}" alt="${news.title}" 
                                    class="w-full h-64 md:h-full object-cover group-hover:scale-105 transition duration-500"
                                    onerror="this.src='https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=800&q=80'">
                            ` : `
                                <div class="w-full h-64 md:h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-600">
                                    <svg class="w-16 h-16 text-white opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                                    </svg>
                                </div>
                            `}
                            ${news.is_featured ? `
                                <div class="absolute top-4 left-4">
                                    <span class="bg-gradient-to-r from-red-500 to-orange-500 text-white px-3 py-1 rounded-full text-xs font-semibold shadow-lg">विशेष रिपोर्ट</span>
                                </div>
                            ` : ''}
                        </div>
                        <div class="md:w-3/5 p-6">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="bg-blue-500 text-white px-3 py-1 rounded text-xs font-semibold">${news.category}</span>
                                <span class="text-gray-500 text-sm flex items-center gap-1">
                                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    ${formatDate(news.created_at)}
                                </span>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition line-clamp-2">
                                ${news.title}
                            </h3>
                            <p class="text-gray-600 mb-4 line-clamp-2">
                                ${news.content.substring(0, 150)}...
                            </p>
                            <button onclick="event.stopPropagation(); viewFullNews(${news.id})" class="text-blue-600 font-semibold flex items-center gap-2 hover:gap-3 transition-all">
                                पूर्ण पढ्नुहोस्
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </button>
                        </div>
                    </div>
                </article>
            `).join('');

            // Latest news (remaining items)
            const latestNews = filteredNews.slice(3, 11);

            if (latestNews.length > 0) {
                document.getElementById('latestNews').innerHTML = latestNews.map(news => `
                    <article class="news-card bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition group fade-in cursor-pointer" onclick="viewFullNews(${news.id})">
                        <div class="flex items-start gap-3 mb-3">
                            <span class="bg-blue-100 text-blue-600 px-3 py-1 rounded text-xs font-semibold">${news.category}</span>
                            <span class="text-gray-500 text-sm flex items-center gap-1">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                ${formatDate(news.created_at)}
                            </span>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition line-clamp-2">
                            ${news.title}
                        </h3>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-2">
                            ${news.content.substring(0, 100)}...
                        </p>
                        <button onclick="event.stopPropagation(); viewFullNews(${news.id})" class="text-blue-600 font-medium flex items-center gap-2 text-sm hover:gap-3 transition-all">
                            विस्तृत पढ्नुहोस्
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                    </article>
                `).join('');
            } else {
                document.getElementById('latestNews').innerHTML = `
                    <div class="col-span-2 bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center">
                        <svg class="w-12 h-12 text-yellow-500 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                        <p class="text-yellow-700 font-medium">यस श्रेणीमा कुनै समाचार भेटिएन</p>
                    </div>
                `;
            }
        }

        // Filter by category
        function filterByCategory(category) {
            currentFilter = category;
            displayNews();

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Search functionality
        function handleSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            if (searchTerm.length < 2) {
                displayNews();
                return;
            }

            const searchResults = allNews.filter(news =>
                news.title.toLowerCase().includes(searchTerm) ||
                news.content.toLowerCase().includes(searchTerm) ||
                news.category.toLowerCase().includes(searchTerm)
            );

            if (searchResults.length > 0) {
                // Display search results in featured section
                document.getElementById('featuredNews').innerHTML = `
                    <div class="mb-4 p-4 bg-blue-50 rounded-lg">
                        <p class="text-blue-700 font-medium flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                            "${searchTerm}" को लागि ${searchResults.length} परिणाम भेटियो
                        </p>
                    </div>
                ` + searchResults.slice(0, 3).map(news => `
                    <article class="news-card bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition group cursor-pointer" onclick="viewFullNews(${news.id})">
                        <div class="md:flex">
                            <div class="md:w-2/5 relative overflow-hidden bg-gray-200">
                                ${news.image_url ? `
                                    <img src="${news.image_url}" alt="${news.title}" 
                                        class="w-full h-64 md:h-full object-cover group-hover:scale-105 transition duration-500"
                                        onerror="this.src='https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=800&q=80'">
                                ` : `
                                    <div class="w-full h-64 md:h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-600">
                                        <svg class="w-16 h-16 text-white opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                                        </svg>
                                    </div>
                                `}
                            </div>
                            <div class="md:w-3/5 p-6">
                                <div class="flex items-center gap-3 mb-3">
                                    <span class="bg-blue-500 text-white px-3 py-1 rounded text-xs font-semibold">${news.category}</span>
                                    <span class="text-gray-500 text-sm">${formatDate(news.created_at)}</span>
                                </div>
                                <h3 class="text-xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition line-clamp-2">
                                    ${news.title}
                                </h3>
                                <p class="text-gray-600 mb-4 line-clamp-2">
                                    ${news.content.substring(0, 150)}...
                                </p>
                                <button onclick="event.stopPropagation(); viewFullNews(${news.id})" class="text-blue-600 font-semibold flex items-center gap-2 hover:gap-3 transition-all">
                                    पूर्ण पढ्नुहोस्
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <polyline points="9 18 15 12 9 6"></polyline>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </article>
                `).join('');

                // Show remaining results in latest news section
                document.getElementById('latestNews').innerHTML = searchResults.slice(3).map(news => `
                    <article class="news-card bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition group cursor-pointer" onclick="viewFullNews(${news.id})">
                        <div class="flex items-start gap-3 mb-3">
                            <span class="bg-blue-100 text-blue-600 px-3 py-1 rounded text-xs font-semibold">${news.category}</span>
                            <span class="text-gray-500 text-sm">${formatDate(news.created_at)}</span>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition line-clamp-2">
                            ${news.title}
                        </h3>
                        <button onclick="event.stopPropagation(); viewFullNews(${news.id})" class="text-blue-600 font-medium flex items-center gap-2 text-sm hover:gap-3 transition-all">
                            विस्तृत पढ्नुहोस्
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                    </article>
                `).join('');
            } else {
                document.getElementById('featuredNews').innerHTML = `
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center">
                        <svg class="w-12 h-12 text-yellow-500 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <p class="text-yellow-700 font-medium">"${searchTerm}" को लागि कुनै परिणाम भेटिएन</p>
                    </div>
                `;
                document.getElementById('latestNews').innerHTML = '';
            }
        }

        // Update trending topics
        function updateTrendingTopics() {
            const categories = {};
            allNews.forEach(news => {
                categories[news.category] = (categories[news.category] || 0) + 1;
            });

            const sorted = Object.entries(categories)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);

            document.getElementById('trendingTopics').innerHTML = sorted.map(([category, count], index) => `
                <button onclick="filterByCategory('${category}')" class="w-full text-left px-4 py-3 bg-gray-50 hover:bg-blue-50 rounded-lg transition group">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-2">
                            <span class="text-gray-400 font-bold">#${index + 1}</span>
                            <span class="text-gray-700 group-hover:text-blue-600 transition font-medium">${category}</span>
                        </div>
                        <span class="text-xs bg-gray-200 group-hover:bg-blue-200 text-gray-600 group-hover:text-blue-600 px-2 py-1 rounded-full transition">${count}</span>
                    </div>
                </button>
            `).join('');
        }

        // Update category stats
        function updateCategoryStats() {
            const categories = {};
            allNews.forEach(news => {
                categories[news.category] = (categories[news.category] || 0) + 1;
            });

            const categoryColors = {
                'समाचार': 'bg-blue-100 text-blue-600',
                'राजनीति': 'bg-red-100 text-red-600',
                'शिक्षा': 'bg-green-100 text-green-600',
                'प्रविधि': 'bg-purple-100 text-purple-600',
                'खेलकुद': 'bg-orange-100 text-orange-600',
                'अर्थ': 'bg-yellow-100 text-yellow-600',
                'मनोरञ्जन': 'bg-pink-100 text-pink-600',
                'स्वास्थ्य': 'bg-teal-100 text-teal-600'
            };

            document.getElementById('categoryStats').innerHTML = `
                <h3 class="text-xl font-bold text-gray-900 mb-4">वर्ग अनुसार</h3>
                <div class="space-y-3">
                    ${Object.entries(categories).map(([category, count]) => `
                        <button onclick="filterByCategory('${category}')" 
                            class="w-full flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition group">
                            <span class="font-medium text-gray-700 group-hover:text-blue-600 transition">${category}</span>
                            <span class="${categoryColors[category] || 'bg-gray-100 text-gray-600'} px-3 py-1 rounded-full text-xs font-semibold">
                                ${count}
                            </span>
                        </button>
                    `).join('')}
                </div>
            `;
        }

        // View full news (opens modal)
        function viewFullNews(newsId) {
            const news = allNews.find(n => n.id === newsId);
            if (!news) return;

            // Create modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 fade-in';
            modal.onclick = (e) => {
                if (e.target === modal) modal.remove();
            };

            modal.innerHTML = `
                <div class="bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="sticky top-0 bg-white border-b p-4 flex justify-between items-center z-10">
                        <div class="flex items-center gap-3">
                            <span class="bg-blue-500 text-white px-3 py-1 rounded text-sm font-semibold">${news.category}</span>
                            ${news.is_breaking ? '<span class="bg-red-500 text-white px-2 py-1 rounded text-xs">ब्रेकिंग</span>' : ''}
                            ${news.is_featured ? '<span class="bg-purple-500 text-white px-2 py-1 rounded text-xs">विशेष</span>' : ''}
                        </div>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-500 hover:text-gray-700 p-2 hover:bg-gray-100 rounded-full transition">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    ${news.image_url ? `
                        <img src="${news.image_url}" alt="${news.title}" 
                            class="w-full h-96 object-cover"
                            onerror="this.style.display='none'">
                    ` : ''}
                    <div class="p-8">
                        <h1 class="text-3xl font-bold text-gray-900 mb-4">${news.title}</h1>
                        <div class="flex items-center gap-4 mb-6 text-sm text-gray-500">
                            <span class="flex items-center gap-1">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                ${formatDate(news.created_at)}
                            </span>
                            ${news.views ? `
                                <span class="flex items-center gap-1">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        <path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                    </svg>
                                    ${news.views} views
                                </span>
                            ` : ''}
                        </div>
                        <div class="prose prose-lg max-w-none text-gray-700 leading-relaxed whitespace-pre-wrap">
                            ${news.content}
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            // Prevent body scroll
            document.body.style.overflow = 'hidden';
            modal.addEventListener('remove', () => {
                document.body.style.overflow = '';
            });
        }

        // Newsletter subscription
        async function subscribeNewsletter(event) {
            event.preventDefault();
            const email = document.getElementById('newsletterEmail').value;
            const msg = document.getElementById('newsletterMsg');

            try {
                const { error } = await supabaseClient
                    .from('newsletter_subscribers')
                    .insert([{ email }]);

                if (error) {
                    if (error.code === '23505') { // Duplicate key
                        msg.textContent = '✓ तपाईं पहिले नै सदस्य हुनुहुन्छ';
                        msg.className = 'text-sm mt-2 text-blue-100';
                    } else {
                        throw error;
                    }
                } else {
                    msg.textContent = '✓ सफलतापूर्वक सदस्यता लिइयो!';
                    msg.className = 'text-sm mt-2 text-green-200 font-medium';
                    document.getElementById('newsletterForm').reset();
                }
            } catch (error) {
                msg.textContent = '✗ त्रुटि भयो। कृपया पुन: प्रयास गर्नुहोस्।';
                msg.className = 'text-sm mt-2 text-red-200';
            }

            msg.classList.remove('hidden');
            setTimeout(() => msg.classList.add('hidden'), 3000);
        }

        // Format date
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));

            if (diffHours < 1) return 'भर्खरै';
            if (diffHours < 24) return `${diffHours} घण्टा अगाडि`;
            if (diffDays === 1) return '१ दिन अगाडि';
            if (diffDays < 7) return `${diffDays} दिन अगाडि`;

            return date.toLocaleDateString('ne-NP');
        }

        // Update current date
        function updateCurrentDate() {
            const date = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('currentDate').textContent = date.toLocaleDateString('ne-NP', options);
        }

        // Toggle functions
        function toggleMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }

        function toggleSearch() {
            const search = document.getElementById('searchBar');
            search.classList.toggle('hidden');
            if (!search.classList.contains('hidden')) {
                document.getElementById('searchInput').focus();
            }
        }

        // Real-time updates
        const newsChannel = supabaseClient
            .channel('news-changes')
            .on('postgres_changes',
                { event: '*', schema: 'public', table: 'news' },
                (payload) => {
                    console.log('News updated:', payload);
                    loadAllNews();
                    loadBreakingNews();
                }
            )
            .subscribe();
    </script>

</body>

</html>